You are tasked with **decompiling the given Verilog code into equivalent Chisel3 code**. Ensure your Chisel code is correct, efficient, and reusable.

# Output

your output must include the following content, each within a Markdown code block with id and group identifiers:

```scala {optimized}
// The final optimized and refactored version of the Chisel3 code
```

# Requirements

- Your thinking process should be comprehensive and well-reasoned, avoid repetitive thinking, keep it concise and informative.
- Your thinking process should not only focus on implementing functionality correct code, but also syntactically correct code. That requires you to think about how to properly use Chisel language features.
- Follow the format and instructions provided in the output section.

# Request

```verilog
{{ source }}
```
